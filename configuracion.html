<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configuracion</title>

  <!-- Incluye Bootstrap 5.1.3 CSS y JS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>

  <!-- Incluye Script de "jQuery" -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <!-- Incluye Script de NavBar general -->
  <script src="js/navbar.js"></script>
  <!-- Incluye Script de "Configuracion" -->
  <script src="js/configuracion.js"></script>

  <!-- Incluye CSS general -->
  <link rel="stylesheet" href="css/styles.css">

</head>

<body class="bg-secondary" onload="verifyRango()">
  <!-- Spinner de carga de pantalla -->
  <div class="loading-overlay">
    <div class="spinner"></div>
  </div>
  
  <!-- Navbar de la pagina web -->
  <nav class="navbar navbar-expand-md sticky-top navbar-dark bg-dark">

    <div class="container-fluid">
      <a class="navbar-brand fs-2 fw-bold" href="index.html">MinIndi</a>

      <!-- Dropdown mini -->
      <div class="dropdown d-md-none">
        <img src="assets/iconUser.png" alt="imagenUser" class="dropdown-toggle imgUser" id="botonUser1" data-bs-toggle="dropdown" aria-expanded="false">
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="botonUser1">
          <li><a class="dropdown-item" href="perfil.html">Mi perfil</a></li>
          <li><a class="dropdown-item" href="configuracion.html">Configuracion</a></li>
          <hr class="hr">
          <li><a class="dropdown-item" href="#">Cerrar sesión</a></li>
        </ul>
      </div>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
        aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
        <div class="navbar-nav">

          <a id="listaJuegos" class="nav-link" href="listaJuegos.html" >Lista de juegos
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-joystick" viewBox="0 0 16 16">
              <path d="M10 2a2 2 0 0 1-1.5 1.937v5.087c.863.083 1.5.377 1.5.726 0 .414-.895.75-2 .75s-2-.336-2-.75c0-.35.637-.643 1.5-.726V3.937A2 2 0 1 1 10 2z"/>
              <path d="M0 9.665v1.717a1 1 0 0 0 .553.894l6.553 3.277a2 2 0 0 0 1.788 0l6.553-3.277a1 1 0 0 0 .553-.894V9.665c0-.1-.06-.19-.152-.23L9.5 6.715v.993l5.227 2.178a.125.125 0 0 1 .001.23l-5.94 2.546a2 2 0 0 1-1.576 0l-5.94-2.546a.125.125 0 0 1 .001-.23L6.5 7.708l-.013-.988L.152 9.435a.25.25 0 0 0-.152.23z"/>
            </svg>
          </a>
          <a id="cesta" class="nav-link" href="cesta.html">Cesta
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-fill" viewBox="0 0 16 16">
              <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5z"/>
            </svg>
          </a>
          <a id="subirJuego" class="nav-link" href="subirJuego.html">Subir Juego
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-down" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M3.5 6a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 1 0-1h2A1.5 1.5 0 0 1 14 6.5v8a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-8A1.5 1.5 0 0 1 3.5 5h2a.5.5 0 0 1 0 1h-2z"/>
              <path fill-rule="evenodd" d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
            </svg>
          </a>
          <a id="adminView" class="nav-link" href="adminView.html">Administrar
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
              <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
              <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
            </svg>
          </a>
          <a id="registro" class="nav-link" href="registro.html">Iniciar sesion / Registrarse
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
              <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
            </svg>
          </a>
        </div>
      </div>

      <!-- Dropdown pantalla completa -->
      <div class="dropdown d-none d-md-block">
        <img src="assets/iconUser.png" alt="imagenUser" class="dropdown-toggle imgUser" id="botonUser2"
             data-bs-toggle="dropdown"
             aria-expanded="false">
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="botonUser2">
          <li><a class="dropdown-item" href="perfil.html">Mi perfil</a></li>
          <li><a class="dropdown-item" href="configuracion.html">Configuracion</a></li>
          <hr class="hr">
          <li><button type="button" class="dropdown-item" href="#" onclick="cerrarSesion()">Cerrar sesión</button></li>
        </ul>
      </div>

    </div>

  </nav>

  <!-- Contenido de la pagina web -->
  <div class="m-3">
    <!-- Soy perfil -->

    <div class="row">

      <!-- Lista de opciones vertical -->
      <div class="col-md-4 d-none d-md-block ">
        <ul class="list-group">
          <a href="perfil.html" class="list-group-item list-group-item-action">Perfil</a>
          <a href="listaDeseos.html" class="list-group-item list-group-item-action">Lista de deseos</a>
          <a href="juegosComprados.html" class="list-group-item list-group-item-action">Juegos comprados</a>
          <a href="juegosSubidos.html" class="list-group-item list-group-item-action">Juegos desarrollados</a>
          <a href="configuracion.html"
            class="list-group-item list-group-item-action bg-dark text-white">Configuracion</a>
        </ul>
      </div>

      <!-- Lista de opciones horizontal -->
      <div class=" d-md-none mb-3">
        <ul class="list-group list-group-horizontal">
          <a href="perfil.html" class="flex-fill d-flex justify-content-center align-items-center text-center
                                             list-group-item list-group-item-action">
            Perfil</a>
          <a href="listaDeseos.html" class="flex-fill d-flex justify-content-center align-items-center text-center
                                             list-group-item list-group-item-action">
            Lista de deseos</a>
          <a href="juegosComprados.html" class="flex-fill d-flex justify-content-center align-items-center text-center
                                             list-group-item list-group-item-action">
            Juegos comprados</a>
          <a href="juegosSubidos.html" class="flex-fill d-flex justify-content-center align-items-center text-center
                                             list-group-item list-group-item-action">
            Juegos desarrollados</a>
          <a href="configuracion.html" class="flex-fill d-flex justify-content-center align-items-center text-center
                                             list-group-item list-group-item-action bg-dark text-white">
            Configuracion</a>
        </ul>
      </div>

      <!-- Contenido Usuario -->
      <div class="col">

        <div class="card mb-2 w-75 mx-auto border border-2 border-dark bg-success text-white" id="solicitarDeveloper">
          <div class="card-body">
            <h2 class="align-middle text-decoration-underline">Ascender a desarrollador</h2>

            <div class="mb-3 row">
              <!-- <label for="oldUsername" class="form-label col-4 col-form-label">¿Quieres publicar tus propios juegos?</label> -->
              <div class="col">
                <span class="text-start">
                  ¿Quieres publicar tus propios juegos? ¡Solicita ascender a desarrollador, y comienza a publicar y vender tus juegos!</span>
              </div>
            </div>

            <hr class="hr">

            <button class="btn btn-dark float-end" onclick="solicitarDeveloper()" id="botonAscender">Solicitar ascenso</button>
          </div>
        </div>

        <div class="card mb-2">
          <div class="card-body">
            <h2 class="align-middle text-decoration-underline">Cambiar nombre de usuario</h2>

            <div class="mb-3 row">
              <label for="oldUsername" class="form-label col-4 col-form-label">Nombre de usuario actual:</label>
              <div class="col">
                <span class="fst-italic text-start form-control-plaintext" id="oldUsername">username</span>
              </div>
            </div>

            <div class="mb-3 row">
              <label for="newUsername" class="form-label col-4 col-form-label">Nuevo nombre de usuario:</label>
              <div class="col">
                <input type="text" class="form-control" id="newUsername" onkeydown="applyHidden('errorUsername')">
                <span id="errorUsername" class="text-danger" hidden>El nuevo nombre no es valido</span>
              </div>
            </div>

            <hr class="hr">

            <button class="btn btn-dark float-end" onclick="newUsername()">Confirmar</button>
          </div>
        </div>

        <div class="card mb-2">
          <div class="card-body">
            <h2 class="align-middle text-decoration-underline">Cambiar imagen de usuario</h2>

            <div class="mb-3 row">
              <label for="oldImagen" class="form-label col-4 col-form-label">Imagen actual:</label>
              <div class="col">
                <img src="assets/iconUser.png" id="oldImagen" alt="imagen de usuario actual" class="border border-3 rounded-circle">
              </div>
            </div>

            <form action="php/usuarios/modificarImagen.php" method="post" onsubmit="return newImagePerfil()" enctype="multipart/form-data">
              <div class="mb-3 row">
                <label for="newImagen" class="form-label col-4 col-form-label">Nueva imagen:</label>
                <div class="col">
                  <input class="form-control" type="file" id="newImagen" name="newImagen" accept="image/*" onclick="applyHidden('errorImagen')">
                  <span id="errorImagen" class="text-danger" hidden>Debes incluir una imagen</span>
                </div>
              </div>

              <hr class="hr">
  
              <button class="btn btn-dark float-end" type="submit">Confirmar</button>
            </form>

          </div>
        </div>

        <div class="card mb-2">
          <div class="card-body">
            <h2 class="align-middle text-decoration-underline">Cambiar descripcion</h2>

            <div class="mb-3 row">
              <label for="oldDescripcion" class="form-label col-4 col-form-label">Descripcion actual:</label>
              <div class="col">
                <span class="fst-italic text-start form-control-plaintext oldDescripcion" id="oldDescripcion">
                  Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptatibus, sequi. Voluptates deserunt
                  provident nam, velit dignissimos placeat repellat praesentium voluptas corrupti suscipit eius iure
                  culpa autem fugit. Autem, repellat a. Cumque nihil est tempora atque dolorum molestias aliquam
                  laudantium
                  voluptate iure? Delectus blanditiis quas, facere accusamus deleniti, maxime laboriosam quam
                  consequatur
                  unde alias iure omnis quos facilis corrupti cum consectetur.
                </span>
              </div>
            </div>

            <div class="mb-3 row">
              <label for="newDescripcion" class="form-label col-4 col-form-label">Nueva descripcion:</label>
              <div class="col">
                <textarea class="form-control" id="newDescripcion" rows="3"></textarea>
              </div>
            </div>

            <hr class="hr">

            <button class="btn btn-dark float-end" onclick="newDescripcion()">Confirmar</button>
          </div>
        </div>

        <div class="card mb-2">
          <div class="card-body">
            <h2 class="align-middle text-decoration-underline">Cambiar contraseña</h2>

            <div class="mb-3 row">
              <label for="newPassword" class="form-label col-4 col-form-label">Nueva contraseña:</label>
              <div class="input-group col">
                <input type="password" class="form-control" id="newPassword" aria-label="Recipient's username"
                  aria-describedby="button-addon2" onkeydown="applyHidden('errorPassword')"> 
              </div>
              <span id="errorPassword" class="text-danger text-end" hidden>La contraseña no cumple los minimos establecidos</span>
            </div>
            <div class="col">
              <span class="form-text">Condiciones minimas:
                <ul>
                  <li>Longitud minima: 8</li>
                  <li>Al menos 1 mayuscula</li>
                  <li>Minimo 1 numero</li>
                </ul>
              </span>
            </div>

            <hr class="hr">

            <button class="btn btn-dark float-end" onclick="newPassword()">Confirmar</button>
          </div>
        </div>

        <div class="card mb-2">
          <div class="card-body">
            <h2 class="align-middle text-decoration-underline">Cambiar redes sociales</h2>

            <div class="mb-3 row">
              <label for="twitterURL" class="form-label col-4 col-form-label">Enlace Twitter:</label>
              <div class="col">
                <input type="text" class="form-control" id="twitterURL" value="enlaceTwitter" onkeydown="applyHidden('errorTwitter')">
                <span id="errorTwitter" class="text-danger text-end" hidden>El enlace de Twitter no es valido</span>

              </div>
            </div>

            <div class="mb-3 row">
              <label for="facebookURL" class="form-label col-4 col-form-label">Enlace Facebook:</label>
              <div class="col">
                <input type="text" class="form-control" id="facebookURL" value="enlaceFacebook" onkeydown="applyHidden('errorFacebook')">
                <span id="errorFacebook" class="text-danger text-end" hidden>El enlace de Facebook no es valido</span>
              </div>
            </div>

            <div class="mb-3 row">
              <label for="instagramURL" class="form-label col-4 col-form-label">Enlace Instagram:</label>
              <div class="col">
                <input type="text" class="form-control" id="instagramURL" value="enlaceInstagram" onkeydown="applyHidden('errorInstagram')">
                <span id="errorInstagram" class="text-danger text-end" hidden>El enlace de Instagram no es valido</span>
              </div>
            </div>

            <hr class="hr">

            <button class="btn btn-dark float-end" onclick="modificarEnlaces()">Confirmar</button>
          </div>
        </div>

        <!-- Button trigger modal -->
        <button type="button" class="btn btn-danger float-end" data-bs-toggle="modal"
          data-bs-target="#modalBorrarCuenta">
          Eliminar cuenta
        </button>

        <!-- Modal -->
        <div class="modal fade" id="modalBorrarCuenta" tabindex="-1" aria-labelledby="exampleModalLabel"
          aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h3 class="modal-title" id="exampleModalLabel">¿Estas seguro?</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>Una vez que elimines tu cuenta, <span class="text-danger fw-bold">no hay vuelta atras.</span></p>
                <p>Todo lo relacionado con tu usuario <span class="text-danger fw-bold">será eliminado</span> (juegos,
                  comentarios...).</p>
                <p>¿Estas seguro de querer borrar tu cuenta?</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="borrarUser()">Eliminar</button>
                <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Conservar cuenta</button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="solicitudEnviada" class="toast border border-2 border-success" role="alert" aria-live="assertive" aria-atomic="true" 
          data-bs-delay="8000">
      <div class="toast-header bg-success">
        <span class="me-auto fw-bold text-white">Solicitud enviada</span>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        <p class="mb-2">
          La solicitud se ha mandado correctamente. Si es aceptada, podrás comprobar que tu reborde cambiará de 
          <span class="text-success fw-bold">verde</span> a  <span class="text-warning fw-bold">dorado</span>, además de que podrás 
          subir tus propios juegos.
        </p>
      </div>
    </div>
  </div>

</body>

<!-- Footer de la pagina web -->
<footer id="footer" class="d-flex fixed-bottom flex-wrap justify-content-between align-items-center py-3 bg-dark">
  <div class="col-md-4 d-flex align-items-center mx-3">
      <span class="text-muted">&copy; 2023, MinIndi</span>
  </div>

  <ul class="nav col-md-4 justify-content-end list-unstyled d-flex mx-3">
      <li class="ms-3">
          <a class="text-muted" title="Twitter" href="https://twitter.com/home">
              <span class="d-none">.</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter"
                  viewBox="0 0 16 16">
                  <path
                      d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" />
              </svg>
          </a>
      </li>
      <li class="ms-3">
          <a class="text-muted" title="Instagram" href="https://www.instagram.com/">
              <span class="d-none">.</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-instagram" viewBox="0 0 16 16">
                  <path
                      d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z" />
              </svg>
          </a>
      </li>
      <li class="ms-3">
          <a class="text-muted" title="Facebook" href="https://www.facebook.com/">
              <span class="d-none">.</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-facebook" viewBox="0 0 16 16">
                  <path
                      d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z" />
              </svg>
          </a>
      </li>
  </ul>

  <div class="col-12 ps-3">
    <a class="link-secondary text-decoration-none" href="terminosCondiciones.html" target="_blank">Terminos y Condiciones</a>
  </div>
  <div class="col-12 ps-3">
    <a class="link-secondary text-decoration-none" href="infoCookies.html" target="_blank">Sobre las cookies</a>
  </div>
</footer>

</html>